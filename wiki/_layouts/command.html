<!doctype html>
<html lang="en">
  <head>
    {% include head.html %}
  </head>
  <body>
    <div class="layout">
      <aside class="sidebar">
        <div class="sidebar-top">
          <div class="logo">
            <img src="{{ '/assets/images/logo.png' | relative_url }}" alt="Site Logo" class="logo-img" style="width:64px; height:64px; border-radius:12px;">
            <div class="site-name">CQ Wiki</div>
          </div>
        </div>

        <nav class="sidebar-nav" aria-label="Main">
          {% assign menu = site.data.nav | default: site.nav %}
          {% if menu %}
            <ul>
              {% for item in menu %}
                <li class="nav-item">
                  <a href="{{ item.url | relative_url }}">
                    <span class="nav-label">{{ item.title }}</span>
                  </a>
                  {% if item.children %}
                    <ul class="sub">
                      {% for child in item.children %}
                        <li><a href="{{ child.url | relative_url }}">{{ child.title }}</a></li>
                      {% endfor %}
                    </ul>
                  {% endif %}
                </li>
              {% endfor %}
            </ul>
          {% endif %}
        </nav>
      </aside>

      <main class="content" role="main">
        <header class="content-header">
          <div style="display:flex; align-items:center; gap:20px; margin:20px 0;">
            {% comment %}
              Commands may use `page.itemico` or `page.icon` for the icon — try both.
            {% endcomment %}
            {% if page.itemico or page.icon %}
              <img src="{{ page.itemico | default: page.icon | relative_url }}" 
                   alt="{{ page.title }} icon" 
                   style="width:64px; height:64px; border-radius:10px; flex-shrink:0;
                          image-rendering:pixelated; image-rendering:-moz-crisp-edges; image-rendering:crisp-edges;">
            {% endif %}

            <div>
              <h1 style="margin:0; font-size:2.2rem;">{{ page.title }}</h1>
              <p style="margin:6px 0 0; color:#666;">
                {% if page.type %}{{ page.type }} • {{ page.perms }}{% endif %}
              </p>
            </div>
          </div>
        </header>

        {{ page.description }}

        <section class="content-body">
          {% if page.usage_desc %}
            <h2>Usage:</h2>
            <div style="margin:8px 0 16px;">
              {{ page.usage_desc | markdownify }}
            </div>
          {% endif %}

          {% if page.snippet %}
            <h2>Snippet:</h2>
            <div style="margin:8px 0 16px;">
              {{ page.snippet | markdownify }}
            </div>
          {% endif %}
        </section>

        <footer class="site-footer" style="margin-top:32px;">
          <p><a href="{{ '/pages/commands.html' | relative_url }}">← Back to commands</a></p>
        </footer>
      </main>
    </div>
  </body>
</html>
